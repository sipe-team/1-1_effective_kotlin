# ì•„ì´í…œ 5
> ì˜ˆì™¸ë¥¼ í™œìš©í•´ ì½”ë“œì— ì œí•œì„ ê±¸ì–´ë¼

## âœ… ì œí•œì„ ìœ„í•œ ì½”ë“œë¸”ë¡ í™œìš©
* requied ë¸”ë¡: ì•„ê·œë¨¼íŠ¸ ì œí•œ
* check ë¸”ë¡: ìƒíƒœì™€ ê´€ë ¨ëœ ë™ì‘ ì œí•œ
* assert ë¸”ë¡: í…ŒìŠ¤íŠ¸ëª¨ë“œì—ì„œ true í™•ì¸
* return, throwì™€ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” Elvis ì—°ì‚°ì

```kotlin
fun pop(num: Int = 1): List<T> {
	//ì•„ê·œë¨¼íŠ¸ ì œí•œ	
    require(num <= size) {
        "Cannot remove more elements than current size"
    }
    //ìƒíƒœ ë™ì‘ ì œí•œ
    check(isopen) { "Cannot pop from closed stack" }
    val let = collection.take(num)
    collection = collection.drop(num)
    //true í™•ì¸
    assert(ret.size == num)
    return ret
}
```

ìœ„ì™€ ê°™ì´ ì œí•œì„ í•˜ë©´, ë‹¤ìŒê³¼ ê°™ì€ ì¥ì ì´ ìˆë‹¤.

1. ì½”ë“œë¡œ ë¬¸ì„œí™”
2. ë¬¸ì œê°€ ìˆë‹¤ë©´ í•¨ìˆ˜ê°€ ì˜ˆìƒí•˜ì§€ ëª»í•œ ë™ì‘ì„ í•˜ì§€ ì•Šê³  ì˜ˆì™¸ë¥¼ ë˜ì§„ë‹¤.
3. ì½”ë“œê°€ ì–´ëŠì •ë„ ìì²´ì ìœ¼ë¡œ ê²€ì‚¬ëœë‹¤. -> ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŒ
4. ìŠ¤ë§ˆíŠ¸ ìºìŠ¤íŠ¸ ê¸°ëŠ¥ì„ í™œìš©í•  ìˆ˜ ìˆê²Œ ë˜ì–´, ìºìŠ¤íŠ¸ë¥¼ ì ê²Œ í•  ìˆ˜ ìˆë‹¤.

### ğŸ”— Require
input ì— ëŒ€í•´ ì œí•œì„ ê±¸ ìˆ˜ ìˆë‹¤. (ex. ìˆ«ìëŠ” ì–‘ì˜ ì •ìˆ˜, ì´ë©”ì¼ ì£¼ì†Œ í˜•ì‹ íŒë³„)

```kotlin
fun factorial(n: Int): Long {
    require(n >= 0) { "Cannot calculate factorial of $n because it is smaller than 0" }
    return if (n <= 1) 1 else factorial(n - 1) * n
}
```
ë˜í•œ `IllegalArgumentException`ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ëŒë‹¤ì‹ì„ ì‚¬ìš©í•´ ë©”ì‹œì§€ë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

![](https://velog.velcdn.com/images/jimin3263/post/1593f965-48cb-4e66-9532-95671c8010ac/image.png)

### ğŸ”— Check
êµ¬ì²´ì ì¸ ì¡°ê±´ì„ ë§Œì¡±í•  ë•Œë§Œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì•¼ í•  ë•Œ ì‚¬ìš©í•œë‹¤. (ex. ê°ì²´ê°€ ë¯¸ë¦¬ ì´ˆê¸°í™”ë˜ì–´ ìˆì–´ì•¼ë§Œ ì²˜ë¦¬, ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í–ˆì„ ë•Œë§Œ ì²˜ë¦¬)

Requireê³¼ ìœ ì‚¬í•˜ì§€ë§Œ `IllegalStateException`ì„ ë°œìƒí•œë‹¤. ì¼ë°˜ì ìœ¼ë¡œ Require - Checkì˜ ìˆœì„œë‹¤.


### ğŸ”— Assert
í•¨ìˆ˜ ë‚´ì—ì„œ ë¡œì§ì´ ì°¸ì¸ì§€ í™•ì¸í•  ë•Œ ì‚¬ìš©í•œë‹¤.

```kotlin
fun pop(num: Int = 1): List<T> {
    // ...
    assert(ret.size == num) //java.lang.AssertionError: Assertion failed ë°œìƒ
    return ret
}
```
-ea JVMì˜µì…˜ì„ í™œì„±í•´ì•¼ í™•ì¸í•  ìˆ˜ ìˆê³ , í…ŒìŠ¤íŠ¸ í•  ë•Œë§Œ í™œì„±í™” ëœë‹¤.

ë‹¨ìœ„í…ŒìŠ¤íŠ¸ AssertThatì™€ ë¹„êµí•´ ì¢‹ì€ ì ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
* íŠ¹ì • ìƒí™©ì´ ì•„ë‹Œ ëª¨ë“  ìƒí™©ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ë¥¼ í•  ìˆ˜ ìˆìŒ
* ì‹¤í–‰ ì‹œì ì— ì •í™•íˆ ì–´ë–»ê²Œ ë˜ëŠ”ì§€ í™•ì¸ ê°€ëŠ¥
* ì‹¤ì œ ì½”ë“œê°€ ë” ë¹ ë¥¸ ì‹œì ì— ì‹¤íŒ¨

### ğŸ”— ìŠ¤ë§ˆíŠ¸ ìºìŠ¤íŒ…
```kotlin
fun changeDress(person: Person) {
    require(person.outfit is Dress)
    val dress: Dress = person.outfit
}
```
requireì„ í†µê³¼í•œ ê²½ìš°, person.outfitì´ finalì´ë¼ë©´ Dressë¡œ ìŠ¤ë§ˆíŠ¸ ìºìŠ¤íŒ…ëœë‹¤.

íŠ¹íˆ null ì²´í‚¹ì— ìœ ìš©í•œë°, `requireNotNull`, `checkNotNull`ì„ ì‚¬ìš©í•´ nullì— ëŒ€í•œ ìŠ¤ë§ˆíŠ¸ ìºìŠ¤íŒ…ì´ ê°€ëŠ¥í•˜ë‹¤.

### ğŸ”— Elvis ì—°ì‚°ì

elvis ì—°ì‚°ìë¥¼ ì´ìš©í•´ nullì¸ ê²½ìš° ë¡œê·¸ë¥¼ ë‚¨ê¸°ë„ë¡ í•˜ê±°ë‚˜ throwë¡œ ì˜ˆì™¸ë¥¼ ë˜ì§ˆ ìˆ˜ ìˆë‹¤.

```kotlin
fun sendEmail(person: Person, text: String) {
    val email: String = person.email ?: run {
        log("Email not sent, no email address")
        return
    }
    // ...
}
```
