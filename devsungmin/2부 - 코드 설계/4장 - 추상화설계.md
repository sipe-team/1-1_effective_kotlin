### 4장 추상화 설계

---

- 추상화는 프로그래밍 세계에서 가장 중요한 개념 중 하나이다.
- 추상화는 복잡성을 숨기기 위해 사용되는 단순한 형식을 의미한다.
- 대표적으로 interface가 있다.
- 추상화를 설계한다는 것은 단순하게 모듈 또는 라이브러리로 분리한다느 의미가 아니다.
- 함수를 정의할 때는 그 구현을 함수 시그니처 뒤에 숨기게 되는데, 이것이 추상화이다.

### [아이템 26 - 함수 내부의 추상화 레벨을 통일하라]

#### [추상화 레벨]

- 일반적으로 컴퓨터 과학자들은 어떤 계층이 높은 레벨인지 낮은 레벨인지 구분한다.
- 높은 레벨일 수록 단순함을 얻지만 제어력을 잃는다.
- C언어의 경우 메모리 관리를 직접 할 수 있지만 자바는 가비지 컬렉터가 자동으로 메모리를 관리해 주기 때문에 메모리 사용을 최적화 하는 것이 굉장히 힘들다.

#### [추상화 레벨 통일]

- 컴퓨터 과학과 마찬가지로 코드도 추상화를 계층처럼 만들어서 사용할 수 있으며, 이를 위한 기본적인 도구가 바로 `함수`이다.
- 함수도 컴퓨터 과학처럼 높은 레벨과 낮은 레벨을 구분해서 사용해야한다는 원칙이 있으며, 이를 `추상화 레벨 통일 원칙`이라고 부른다.
- 함수는 간단해야하며, 최소한의 책임만을 가져야한다.

#### [프로그램 아키텍처의 추상 레벨]

- 추상화 계층이라는 개념은 함수보다 높은 레벨에서도 적용 할 수 있다.
- 충상화를 구분하는 이유는 서브 시스템의 세부 상항을 숨김으로써 상호 운영성과 플랫폼 독립성을 얻기 위함이다.

---

### [아이템 27 - 변화로부터 코드를 보호하려면 추상화를 사용하라]

- 추상화는 단순하게 중복성을 제거해서 코드를 구성하기 위한 것이 아니며, 추상화는 코드를 변경해야 할 때 도움이 된다.
- 추상화를 사용하기 위해서는 추상화를 사용할 떄 장점과 단점을 모두 이해해야하며, 프로젝트 단위 혹은 팀 단위에 따라 균형을 맞추어야 한다.
- 추상화 처리가 너무 많거나 너무 적은 것은 좋은 상황이 이니다.

---

### [아이템 28 - API  안정성을 확인하라]

- 프로그래밍은 안정적이고 최대한 표준적인 API를 선호한다.
- 그 이유는 다음과 같다.
  - API가 변경되고 개발자가 이를 업데이트 했다면, 관련된 여러 코드를 수동으로 업데이트 해야한다. 특히, 라이브러리의 경우 버전업이 되면서 변경이 되거나 사라지는 함수들이 있지만 이전 버전의 호환성을 위해 유지하는 경우가 많다. 하지만 이런 경우 점점 버전 업데이트가 어려워지고, 버그와 취약성등이 발생 할 수 있어 개발자는 안정적인 라이브로리로 업데이트 하는 것을 두려워하지 않아야 한다.
  - 오래된 지식의 경우 보안 문제가 발생 할 수 있는 경우가 많이 발생한다. 따라서 개발자는 새로운 API를 배워야 하며 배우는 초반 단계에서 안정적인 버전을 기반으로 공부해 두는 것이 좋다.

---

### [아이템 29 - 외부 API를 랩해서 사용하라]

- API 설계자가 안전한 코드가 아니기에 사용에 주의를 하거나, 이를 사용하는 개발자가 해당 코드를 제대로 신뢰할 수 없다면 해당 API는 안전한 API가 아니다.

- 불안정한 API를 사용하는 것은 굉장히 위험하며, 사용한다고 해도 직접적으로 로직과 결합시키지 않는 것이 좋다.

- 많은 프로젝트에서 불안하다고 판단되는 외부 라이브러리를 사용할 때는 wrap해서 사용한다.

- wrap해서 사용하면 자유와 안정성을 얻을 수 있다.

  [wrap해서 사용하면 얻을 수 있는 장점]

  - 문제가 발생한다면 warpper만 변경하면 쉽게 대응할 수 있다.
  - 프로젝트의 스타일에 맞춰서 API형태를 조정할 수 있다.
  - 특정 라이브러리에서 문제가 발생하면, warpper를 수정해서 다른 라이브러리를 사용하도록 코드를 쉽게 변경할 수 있다.
  - 필요한 경우 쉽게 동작을 추가하거나 수정 할 수 있다.

  

  [wrap해서 사용하면 얻을 수 있는 단점]

  - wrapper를 따로 정의해야한다.
  - 다른 개발자가 프로젝트를 다룰 떄 어떤 wrapper들이 있는지 확인해야한다.
  - wrapper는 프로젝트 내부에서만 유효하므로 문제가 생겨도 질문을 할 수 없다.